Template 1: Proximity Search (Closest N)
User Prompt: "What are the {limit} closest {mappin_type_label} to {location_name}?"
Example: "What are the 3 closest notice boards to Crow's Perch?"
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX dbr: <http://cgi.di.uoa.gr/witcher/resource/>

SELECT ?feature ?featureLabel (geof:distance(?locWKT, ?featWKT) AS ?distance)
WHERE {
  # Find the location to measure from
  ?location rdfs:label "{location_name}"@en .
  ?location geo:hasGeometry/geo:asWKT ?locWKT .
  
  # Find the type of feature we are looking for
  ?featureType rdfs:label "{mappin_type_label}"@en .
  ?feature a ?featureType ;
           rdfs:label ?featureLabel ;
           geo:hasGeometry/geo:asWKT ?featWKT .
}
ORDER BY ?distance
LIMIT {limit}


Template 2: Spatial Containment (What's Inside?)
User Prompt: "List all {mappin_type_label} inside {location_name}."
Example: "List all herbalists inside Novigrad."
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?feature ?featureLabel
WHERE {
  # Get the polygon of the containing location
  ?location rdfs:label "{location_name}"@en .
  ?location geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  # Find the features of the desired type
  ?featureType rdfs:label "{mappin_type_label}"@en .
  ?feature a ?featureType ;
           rdfs:label ?featureLabel ;
           geo:hasGeometry/geo:asWKT ?pointWKT .
  
  # Filter for features within the polygon
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 3: Spatial Context (Where is this?)
User Prompt: "Which city is {location_name} in?"
Example: "Which city is the Kingfisher Inn in?"
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?cityLabel
WHERE {
  ?location rdfs:label "{location_name}"@en ;
            geo:hasGeometry/geo:asWKT ?pointWKT .
  
  ?city a witcher:City ;
        rdfs:label ?cityLabel ;
        geo:hasGeometry/geo:asWKT ?polygonWKT .
        
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 4: Cross-Layer Query (Intersection)
User Prompt: "Show me {feature_type_A_label} that are in a {feature_type_B_label}."
Example: "Show me roads that are in a swamp."
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT DISTINCT ?featureA ?featureB
WHERE {
  ?typeA rdfs:label "{feature_type_A_label}"@en .
  ?featureA a ?typeA ;
            geo:hasGeometry/geo:asWKT ?geomA_WKT .
  
  ?typeB rdfs:label "{feature_type_B_label}"@en .
  ?featureB a ?typeB ;
            geo:hasGeometry/geo:asWKT ?geomB_WKT .
            
  FILTER(geof:sfIntersects(?geomA_WKT, ?geomB_WKT))
}
LIMIT 10


Template 5: Point of Interest by Type
User Prompt: "Where is the {mappin_type_label} in {city_name}?"
Example: "Where is the armorer in Oxenfurt?"
SPARQL Template: (This combines containment and type search)
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?poiLabel ?pointWKT
WHERE {
  ?city rdfs:label "{city_name}"@en .
  ?city geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  ?poiType rdfs:label "{mappin_type_label}"@en .
  ?poi a ?poiType ;
       rdfs:label ?poiLabel ;
       geo:hasGeometry/geo:asWKT ?pointWKT .
  
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 6: Simple Property Lookup (Who/What is...)
User Prompt: "What is the hair color of {character_name}?" // More general: What is the {property} of {character name}
Example: "What is the hair color of Geralt of Rivia?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?value
WHERE {
  ?char rdfs:label "{character_name}"@en .
  ?char witcher:hair_color ?value .
}


Template 7: Inverse Property Lookup (Who has...)
User Prompt: "Which characters have {property_value} hair?"
Example: "Which characters have black hair?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?charLabel
WHERE {
  ?char witcher:hair_color "{property_value}" .
  ?char rdfs:label ?charLabel .
}


Template 8: Relationship Query (Who is affiliated with...)
User Prompt: "Who is affiliated with the {organization_name}?" # Na kanw pio generic
Example: "Who is affiliated with the School of the Cat?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?memberLabel
WHERE {
  ?org rdfs:label "{organization_name}"@en .
  ?member witcher:affiliations ?org .
  ?member rdfs:label ?memberLabel .
}


Template 9: Instance Listing by Type
User Prompt: "List all known {class_label}."
Example: "List all known witchers."
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?instanceLabel
WHERE {
  ?class rdfs:label "{class_label}"@en .
  ?instance a ?class .
  ?instance rdfs:label ?instanceLabel .
}


Template 10: Multi-hop Query
User Prompt: "What is the profession of characters affiliated with the {organization_name}?"
Example: "What is the profession of characters affiliated with the School of the Griffin?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT DISTINCT ?professionLabel
WHERE {
  ?org rdfs:label "{organization_name}"@en .
  ?member witcher:affiliations ?org .
  ?member witcher:profession ?profession .
  ?profession rdfs:label ?professionLabel .
}


Template 11: Find Person by Location
User Prompt: "Who is the {profession_label} in {city_name}?"
Example: "Who is the blacksmith in Oxenfurt?"
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?personLabel
WHERE {
  ?city rdfs:label "{city_name}"@en .
  ?city geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  ?profession rdfs:label "{profession_label}"@en .
  ?person witcher:profession ?profession ;
          rdfs:label ?personLabel ;
          geo:hasGeometry/geo:asWKT ?pointWKT .
          
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 12: Quests by Region
User Prompt: "List all quests in {region_name}."  // List all {geospatial entity} in {region name}
Example: "List all quests in Novigrad."
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?questLabel
WHERE {
  ?region rdfs:label "{region_name}"@en .
  ?quest a witcher:The_Witcher_3_quests ; # Assuming a parent class for all quests
         witcher:region ?region ;
         rdfs:label ?questLabel .
}


Template 13: Count entities of a type in a location
User Prompt: "How many {mappin_type_label} are in {location_name}?"
Example: "How many monster nests are in Velen?"
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT (COUNT(?feature) as ?count)
WHERE {
  ?location rdfs:label "{location_name}"@en .
  ?location geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  ?featureType rdfs:label "{mappin_type_label}"@en .
  ?feature a ?featureType ;
           geo:hasGeometry/geo:asWKT ?pointWKT .
  
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}

Template 14: Find quests involving a specific enemy
User Prompt: "Which quests involve fighting a {enemy_name}?"
Example: "Which quests involve fighting a Griffin?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?questLabel
WHERE {
    ?enemy rdfs:label "{enemy_name}"@en .
    ?quest witcher:enemies ?enemy ;
           rdfs:label ?questLabel .
}


Template 15: Find characters by race and location
User Prompt: "Find all {race_label} in {city_name}."
Example: "Find all elves in Novigrad."
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?charLabel
WHERE {
  ?city rdfs:label "{city_name}"@en .
  ?city geo:hasGeometry/geo:asWKT ?polygonWKT .

  ?race rdfs:label "{race_label}"@en .
  ?char witcher:race ?race ;
        rdfs:label ?charLabel ;
        geo:hasGeometry/geo:asWKT ?pointWKT .
        
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 16: Yes/No Query (ASK)
User Prompt: "Is {location_A} inside {location_B}?"    // Generalise geospatial relation (inside)
Example: "Is the Inn at the Crossroads inside Velen?"
SPARQL Template:
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

ASK WHERE {
  ?locA rdfs:label "{location_A}"@en .
  ?locA geo:hasGeometry/geo:asWKT ?geomA_WKT .
  
  ?locB rdfs:label "{location_B}"@en .
  ?locB geo:hasGeometry/geo:asWKT ?geomB_WKT .
  
  FILTER(geof:sfWithin(?geomA_WKT, ?geomB_WKT))
}


Template 17: Superclass Query
User Prompt: "What kind of thing is a {subclass_label}?"
Example: "What kind of thing is a Blacksmith?" (the mappin type)
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?parentClassLabel
WHERE {
  ?subclass rdfs:label "{subclass_label}"@en .
  ?subclass rdfs:subClassOf ?parentClass .
  ?parentClass rdfs:label ?parentClassLabel .
}


Template 18: Find characters with a certain ability
User Prompt: "Which witchers can use {ability_name}?"
Example: "Which witchers can use Signs?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?witcherLabel
WHERE {
  ?ability rdfs:label "{ability_name}"@en .
  ?witcher a witcher:Witchers ; # or a more specific class
           witcher:abilities ?ability ;
           rdfs:label ?witcherLabel .
}


Template 19: Find all locations on a specific map
User Prompt: "List everything on the {map_name} map."
Example: "List everything on the White Orchard Map."
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT DISTINCT ?featureLabel
WHERE {
  ?map rdfs:label "{map_name} Map"@en .
  ?feature witcher:isPartOf ?map .
  ?feature rdfs:label ?featureLabel .
}
LIMIT 20


Template 20: Ontology Query (using your custom property)  NOT VERY USEFUL 
User Prompt: "What kind of map pin does a {profession_label} use?"
Example: "What kind of map pin does a Blacksmith use?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?mappinTypeLabel
WHERE {
    ?profession rdfs:label "{profession_label}"@en .
    ?profession witcher:usesMappinType ?mappinType .
    ?mappinType rdfs:label ?mappinTypeLabel .
}


Template 21: Comparative Proximity (Closer than)
User Prompt: "Is {location_A} closer to {location_B} or {location_C}?"
SPARQL Template: (This is a complex query that requires two distance calculations and a comparison)
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?loc_B_Label ?distance_to_B ?loc_C_Label ?distance_to_C 
       (IF(?distance_to_B < ?distance_to_C, ?loc_B_Label, ?loc_C_Label) AS ?closerLocation)
WHERE {
  ?loc_A rdfs:label "{location_A}" .
  ?loc_A geo:hasGeometry/geo:asWKT ?wkt_A .
  
  {
    SELECT ?loc_A ?wkt_A (geof:distance(?wkt_A, ?wkt_B) AS ?distance_to_B) ?loc_B_Label
    WHERE {
      ?loc_B rdfs:label "{location_B}" .
      ?loc_B geo:hasGeometry/geo:asWKT ?wkt_B .
    }
  }
  {
    SELECT ?loc_A ?wkt_A (geof:distance(?wkt_A, ?wkt_C) AS ?distance_to_C) ?loc_C_Label
    WHERE {
      ?loc_C rdfs:label "{location_C}" .
      ?loc_C geo:hasGeometry/geo:asWKT ?wkt_C .
    }
  }
}


Template 22: Superlative Proximity (Farthest)
User Prompt: "Which {mappin_type_label} is farthest from {location_name}?"
Example: "Which Place of Power is farthest from Novigrad?"
SPARQL Template: (Same as the "closest" query, but with ORDER BY DESC)
# ... prefixes ...
SELECT ?feature ?featureLabel ?distance
WHERE {
  ?location rdfs:label "{location_name}" .
  ?location geo:hasGeometry/geo:asWKT ?locWKT .
  
  ?featureType rdfs:label "{mappin_type_label}" .
  ?feature a ?featureType ;
           rdfs:label ?featureLabel ;
           geo:hasGeometry/geo:asWKT ?featWKT .
  BIND(geof:distance(?locWKT, ?featWKT) AS ?distance)
}
ORDER BY DESC(?distance)
LIMIT 1


Template 23: Superlative by Attribute (Largest Area)
User Prompt: "What is the largest {feature_type_label} on the {map_name} Map?"
Example: "What is the largest city on the Novigrad and Velen Map?"
SPARQL Template:
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX witcher: <http://cgi.di.uoa.gr/witcher/ontology#>

SELECT ?featureLabel ?area
WHERE {
  ?map rdfs:label "{map_name} Map" .
  ?featureType rdfs:label "{feature_type_label}" .
  
  ?feature a ?featureType ;
           witcher:isPartOf ?map ;
           rdfs:label ?featureLabel ;
           geo:hasGeometry/witcher:shapeArea ?area .
}
ORDER BY DESC(?area)
LIMIT 1


Template 24: Count within Polygon
User Prompt: "How many {mappin_type_label} are there in {location_name}?"
Example: "How many monster nests are there in Velen?"
SPARQL Template:
# ... prefixes ...
SELECT (COUNT(?feature) as ?count)
WHERE {
  ?location rdfs:label "{location_name}" .
  ?location geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  ?featureType rdfs:label "{mappin_type_label}" .
  ?feature a ?featureType ;
           geo:hasGeometry/geo:asWKT ?pointWKT .
  
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 25: Count within Buffer (Radius)
User Prompt: "How many {mappin_type_label} are within {distance} units of {location_name}?"
Example: "How many Places of Power are within 1000 units of Kaer Morhen?"
SPARQL Template:
# ... prefixes ...
SELECT (COUNT(?feature) as ?count)
WHERE {
  ?centerLoc rdfs:label "{location_name}" .
  ?centerLoc geo:hasGeometry/geo:asWKT ?centerWKT .
  
  ?featureType rdfs:label "{mappin_type_label}" .
  ?feature a ?featureType ;
           geo:hasGeometry/geo:asWKT ?featureWKT .
  
  FILTER(geof:distance(?centerWKT, ?featureWKT) < {distance})
}


Template 26: Comparative Count
User Prompt: "Does {location_A} have more {mappin_type_label} than {location_B}?"
SPARQL Template: (This requires a subquery for each count and then a comparison)
# ... prefixes ...
SELECT (IF(?countA > ?countB, "Yes", "No") AS ?result)
WHERE {
  {
    SELECT (COUNT(?featureA) as ?countA) WHERE {
      ?locA rdfs:label "{location_A}" .
      ?locA geo:hasGeometry/geo:asWKT ?polyA .
      ?type rdfs:label "{mappin_type_label}" .
      ?featureA a ?type ; geo:hasGeometry/geo:asWKT ?pointA .
      FILTER(geof:sfWithin(?pointA, ?polyA))
    }
  }
  {
    SELECT (COUNT(?featureB) as ?countB) WHERE {
      ?locB rdfs:label "{location_B}" .
      ?locB geo:hasGeometry/geo:asWKT ?polyB .
      ?type rdfs:label "{mappin_type_label}" .
      ?featureB a ?type ; geo:hasGeometry/geo:asWKT ?pointB .
      FILTER(geof:sfWithin(?pointB, ?polyB))
    }
  }
}


Template 27: Existence within Polygon
User Prompt: "Is there a {mappin_type_label} in {location_name}?"
Example: "Is there an armorer in White Orchard?"
SPARQL Template:
# ... prefixes ...
ASK WHERE {
  ?location rdfs:label "{location_name}" .
  ?location geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  ?featureType rdfs:label "{mappin_type_label}" .
  ?feature a ?featureType ;
           geo:hasGeometry/geo:asWKT ?pointWKT .
  
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 28: Spatial Relationship Verification (Intersects)
User Prompt: "Does the {road_name} road pass through {region_name}?"
SPARQL Template:
# ... prefixes ...
ASK WHERE {
  ?road rdfs:label "{road_name}" .
  ?road geo:hasGeometry/geo:asWKT ?lineWKT .
  
  ?region rdfs:label "{region_name}" .
  ?region geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  FILTER(geof:sfIntersects(?lineWKT, ?polygonWKT))
}


Template 29: Adjacency/Touching
User Prompt: "Is the {region_A} region next to the {region_B} region?"
SPARQL Template:
# ... prefixes ...
ASK WHERE {
  ?regionA rdfs:label "{region_A}" .
  ?regionA geo:hasGeometry/geo:asWKT ?polyA_WKT .
  
  ?regionB rdfs:label "{region_B}" .
  ?regionB geo:hasGeometry/geo:asWKT ?polyB_WKT .
  
  FILTER(geof:sfTouches(?polyA_WKT, ?polyB_WKT))
}


Template 30: Find Location by Two Feature Types
User Prompt: "Which city has both a {mappin_type_A} and a {mappin_type_B}?"
Example: "Which city has both a blacksmith and an armorer?"
SPARQL Template:
# ... prefixes ...
SELECT DISTINCT ?cityLabel
WHERE {
  ?city a witcher:City ;
        rdfs:label ?cityLabel ;
        geo:hasGeometry/geo:asWKT ?polygonWKT .
  
  # Find a feature of the first type within the city
  ?typeA rdfs:label "{mappin_type_A}" .
  ?featureA a ?typeA ; geo:hasGeometry/geo:asWKT ?pointA .
  FILTER(geof:sfWithin(?pointA, ?polygonWKT))

  # Find a feature of the second type within the SAME city
  ?typeB rdfs:label "{mappin_type_B}" .
  ?featureB a ?typeB ; geo:hasGeometry/geo:asWKT ?pointB .
  FILTER(geof:sfWithin(?pointB, ?polygonWKT))
}



Template 31: Find Quests Starting in a Specific Type of Region
User Prompt: "Which quests start in a {region_type_label}?"
Example: "Which quests start in a swamp?"
SPARQL Template:
# ... prefixes ...
SELECT ?questLabel
WHERE {
  # Find a region of the desired type
  ?regionType rdfs:label "{region_type_label}" .
  ?region a ?regionType ;
          geo:hasGeometry/geo:asWKT ?polygonWKT .
          
  # Find a quest with a starting point inside that region
  ?quest a witcher:The_Witcher_3_quests ;
         rdfs:label ?questLabel ;
         geo:hasGeometry/geo:asWKT ?pointWKT .
         
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 32: Find Character by Profession and Proximity
User Prompt: "Who is the closest {profession_label} to {location_name}?"
SPARQL Template:
# ... prefixes ...
SELECT ?personLabel ?distance
WHERE {
  ?location rdfs:label "{location_name}" .
  ?location geo:hasGeometry/geo:asWKT ?locWKT .
  
  ?profession rdfs:label "{profession_label}" .
  ?person witcher:profession ?profession ;
          rdfs:label ?personLabel ;
          geo:hasGeometry/geo:asWKT ?personWKT .
  BIND(geof:distance(?locWKT, ?personWKT) AS ?distance)
}
ORDER BY ?distance
LIMIT 1


Template 33: Filter by Attribute, then Locate
User Prompt: "Where are the quests with a suggested level of {level_number}?"
SPARQL Template:
# ... prefixes ...
SELECT ?questLabel ?questLocationWKT
WHERE {
  ?quest a witcher:The_Witcher_3_quests ;
         witcher:level "{level_number}" ;
         rdfs:label ?questLabel ;
         geo:hasGeometry/geo:asWKT ?questLocationWKT .
}


Template 34: Find the Center of a Feature
User Prompt: "What are the coordinates of {location_name}?"
SPARQL Template:
# ... prefixes ...
SELECT ?wkt
WHERE {
  ?location rdfs:label "{location_name}" .
  ?location geo:hasGeometry/geo:asWKT ?wkt .
}


Template 35: Find the Map that Contains a Feature
User Prompt: "Which map is {location_name} on?"
SPARQL Template:
# ... prefixes ...
SELECT ?mapLabel
WHERE {
  ?location rdfs:label "{location_name}" .
  ?location witcher:isPartOf ?map .
  ?map rdfs:label ?mapLabel .
}


Template 36: Find Features on a Specific Map
User Prompt: "List all {feature_type_label} on the {map_name} Map."
SPARQL Template:
# ... prefixes ...
SELECT ?featureLabel
WHERE {
    ?map rdfs:label "{map_name} Map" .
    ?featureType rdfs:label "{feature_type_label}" .
    ?feature a ?featureType ;
             witcher:isPartOf ?map ;
             rdfs:label ?featureLabel .
}


Template 37: Find the Closest Feature of One Type to a Feature of Another Type
User Prompt: "What is the closest {mappin_type_A} to a {mappin_type_B}?"
SPARQL Template:
# ... prefixes ...
SELECT ?featureA_label ?featureB_label ?distance
WHERE {
    ?typeA rdfs:label "{mappin_type_A}" .
    ?featureA a ?typeA ;
              rdfs:label ?featureA_label ;
              geo:hasGeometry/geo:asWKT ?wktA .

    ?typeB rdfs:label "{mappin_type_B}" .
    ?featureB a ?typeB ;
              rdfs:label ?featureB_label ;
              geo:hasGeometry/geo:asWKT ?wktB .

    BIND(geof:distance(?wktA, ?wktB) AS ?distance)
}
ORDER BY ?distance
LIMIT 1


Template 38: Count features within a certain distance of another feature type
User Prompt: "How many {mappin_type_A} are within {distance} units of any {mappin_type_B}?"
SPARQL Template:
# ... prefixes ...
SELECT (COUNT(DISTINCT ?featureA) as ?count)
WHERE {
    ?typeA rdfs:label "{mappin_type_A}" .
    ?featureA a ?typeA ;
              geo:hasGeometry/geo:asWKT ?wktA .

    ?typeB rdfs:label "{mappin_type_B}" .
    ?featureB a ?typeB ;
              geo:hasGeometry/geo:asWKT ?wktB .

    FILTER(geof:distance(?wktA, ?wktB) < {distance})
}


Template 39: Find features with a property in a certain location
User Prompt: "Which characters in {location_name} have {property_value} hair?"
SPARQL Template:
# ... prefixes ...
SELECT ?charLabel
WHERE {
  ?location rdfs:label "{location_name}" .
  ?location geo:hasGeometry/geo:asWKT ?polygonWKT .

  ?char a witcher:The_Witcher_3_characters ;
        witcher:hair_color "{property_value}" ;
        rdfs:label ?charLabel ;
        geo:hasGeometry/geo:asWKT ?pointWKT .
        
  FILTER(geof:sfWithin(?pointWKT, ?polygonWKT))
}


Template 40: Find the largest feature of a certain type in a location
User Prompt: "What is the largest {feature_type_label} in {location_name}?"
SPARQL Template:
# ... prefixes ...
SELECT ?featureLabel ?area
WHERE {
    ?location rdfs:label "{location_name}" .
    ?location geo:hasGeometry/geo:asWKT ?polygonWKT .

    ?featureType rdfs:label "{feature_type_label}" .
    ?feature a ?featureType ;
             geo:hasGeometry/geo:asWKT ?featureWKT ;
             geo:hasGeometry/witcher:shapeArea ?area .

    FILTER(geof:sfWithin(?featureWKT, ?polygonWKT))
}
ORDER BY DESC(?area)
LIMIT 1